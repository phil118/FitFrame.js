!function(t,i,e,s){var n="fitFrame",a="plugin_"+n,o="resize";function h(i,e,s){this.element=t(i),this.options=t.extend({},s,e),this._defaults=s,this._init()}h.prototype={update:function(){this.options.mode===o?this._resizeNew():(this._calcWrapped(),this._wrapNew())},wrap:function(i){var e=t(i).data("width")||t(i).width(),s=t(i).data("height")||t(i).height(),n=100*this._calculateRatio(e,s)+"%",a=t("<div/>").addClass(this.options.wrapperCssClass).css("padding-bottom",n);return i.wrap(a).parent()},resize:function(t){return this._setupIframe(t),this._resizeIframe(t,this.element.width(),this.element.height(),this.options.fitHeight),t},destroy:function(){var i=this;i.options.mode===o?(this.element.find("iframe."+this.options.iframeCssClass).each(function(){var e=t(this).data(n);t(this).removeClass(i.options.iframeCssClass).width(e.width).height(e.height).data(n,null)}),this._unbind()):this.element.find("."+this.options.wrapperCssClass).children().unwrap(),this.element.data(a,null)},_init:function(){this.options.fitHeight&&(this.options.mode=o),this.options.mode===o&&this._bind(),this.update()},_calcWrapped:function(){var i=this,e=i.element.find("iframe").filter(function(){return t(this).closest("."+i.options.wrapperCssClass).length});console.log(e),e.each(function(){var e=this,s=t(e).data("width")||t(e).attr("width"),n=t(e).data("height")||t(e).attr("height"),a=100*i._calculateRatio(s,n)+"%";t(e).parent("."+i.options.wrapperCssClass).css("padding-bottom",a)})},_wrapNew:function(){var i=this;this.element.find("iframe").filter(function(){return!t(this).closest("."+i.options.wrapperCssClass).length}).each(function(){i.wrap(t(this))})},_resizeNew:function(){var i=this;t("iframe").not(this.options.iframeCssClass).each(function(){i._setupIframe(t(this))}),this._resizeAll()},_setupIframe:function(i){var e=t(i).data("width")||t(i).width(),s=t(i).data("height")||t(i).height();i.data(n,{ratio:this._calculateRatio(e,s),width:e,height:s}).addClass(this.options.iframeCssClass)},_resizeAll:function(){var i=this,e=this.options.containerWidth.call(this),s=this.options.containerHeight.call(this),n=this.options.fitHeight;this.element.find("iframe."+this.options.iframeCssClass).each(function(){i._resizeIframe(t(this),e,s,n)})},_resizeIframe:function(t,i,e,s){var a=t.data(n).ratio;s&&i*a>e?t.height(e).width(e/a):t.height(i*a).width("100%")},_calculateRatio:function(t,i){return(i/t).toPrecision(4)},_bind:function(){var e,s=this;t(i).on("resize."+n,function(){clearTimeout(e),e=setTimeout(function(){s._resizeAll()},100)})},_unbind:function(){t(i).off("."+n)}},t.fn[n]=function(i){var e,s=arguments;return this.each(function(){var o=t.data(this,a);if(o){if("string"==typeof i&&"_"!==i[0]){var r=o[i];"function"==typeof r?e=r.apply(o,Array.prototype.slice.call(s,1)):t.error("Public method '"+i+"' does not exist on jQuery."+n)}}else t.data(this,a,new h(this,i,t.fn[n].defaults))}),void 0!==e?e:this},t.fn[n].defaults={wrapperCssClass:"fitframe-wrap",iframeCssClass:"fitframe",mode:"wrap",fitHeight:!1,containerHeight:function(){return this.element.height()},containerWidth:function(){return this.element.width()}}}(jQuery,window,document);