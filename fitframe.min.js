!function(h,e,t,i){var n="fitFrame",r="plugin_"+n,s="resize";function o(t,i,e){this.element=h(t),this.options=h.extend({},e,i),this._defaults=e,this._init()}o.prototype={update:function(){this.options.mode===s?this._resizeNew():(this._calcWrapped(),this._wrapNew())},wrap:function(t){var i=h(t).data("width")||h(t).attr("width")||h(t).width(),e=h(t).data("height")||h(t).attr("height")||h(t).height(),s=100*this._calculateRatio(i,e)+"%";if(this.options.limitToNativeWidth){var a=h('<div class="fitframe-limit" style="max-width: '+i+'px"><div class="'+this.options.wrapperCssClass+'" style="padding-bottom: '+s+'"></div></div>');return t.wrap(a).parent(".fitframe-limit")}var n=h("<div/>").addClass(this.options.wrapperCssClass).css("padding-bottom",s);return t.wrap(n).parent()},resize:function(t){return this._setupIframe(t),this._resizeIframe(t,this.element.width(),this.element.height(),this.options.fitHeight),t},destroy:function(){var i=this;i.options.mode===s?(this.element.find("iframe."+this.options.iframeCssClass).each(function(){var t=h(this).data(n);h(this).removeClass(i.options.iframeCssClass).width(t.width).height(t.height).data(n,null)}),this._unbind()):this.element.find("."+this.options.wrapperCssClass).children().unwrap(),this.element.data(r,null)},_init:function(){this.options.fitHeight&&(this.options.mode=s),this.options.mode===s&&this._bind(),this.update()},_calcWrapped:function(){var a=this;a.element.find("iframe").filter(function(){return h(this).closest("."+a.options.wrapperCssClass).length}).each(function(){var t=this,i=h(t).data("width")||h(t).attr("width"),e=h(t).data("height")||h(t).attr("height"),s=100*a._calculateRatio(i,e)+"%";h(t).parent("."+a.options.wrapperCssClass).css("padding-bottom",s)})},_wrapNew:function(){var t=this;this.element.find("iframe").filter(function(){return!h(this).closest("."+t.options.wrapperCssClass).length}).each(function(){t.wrap(h(this))})},_resizeNew:function(){var t=this;h("iframe").not(this.options.iframeCssClass).each(function(){t._setupIframe(h(this))}),this._resizeAll()},_setupIframe:function(t){var i=h(t).data("width")||h(t).width(),e=h(t).data("height")||h(t).height();t.data(n,{ratio:this._calculateRatio(i,e),width:i,height:e}).addClass(this.options.iframeCssClass)},_resizeAll:function(){var t=this,i=this.options.containerWidth.call(this),e=this.options.containerHeight.call(this),s=this.options.fitHeight;this.element.find("iframe."+this.options.iframeCssClass).each(function(){t._resizeIframe(h(this),i,e,s)})},_resizeIframe:function(t,i,e,s){var a=t.data(n).ratio;s&&e<i*a?t.height(e).width(e/a):t.height(i*a).width("100%")},_calculateRatio:function(t,i){return(i/t).toPrecision(4)},_bind:function(){var t,i=this;h(e).on("resize."+n,function(){clearTimeout(t),t=setTimeout(function(){i._resizeAll()},100)})},_unbind:function(){h(e).off("."+n)}},h.fn[n]=function(e){var s,a=arguments;return this.each(function(){var t=h.data(this,r);if(t){if("string"==typeof e&&"_"!==e[0]){var i=t[e];"function"==typeof i?s=i.apply(t,Array.prototype.slice.call(a,1)):h.error("Public method '"+e+"' does not exist on jQuery."+n)}}else h.data(this,r,new o(this,e,h.fn[n].defaults))}),void 0!==s?s:this},h.fn[n].defaults={wrapperCssClass:"fitframe-wrap",iframeCssClass:"fitframe",mode:"wrap",fitHeight:!1,containerHeight:function(){return this.element.height()},containerWidth:function(){return this.element.width()},limitToNativeWidth:!1}}(jQuery,window,document);