!function(a,e,t,i){var h="fitFrame",o="plugin_"+h,s="resize";function r(t,i,e){this.element=a(t),this.options=a.extend({},e,i),this._defaults=e,this._init()}r.prototype={update:function(){this.options.mode===s?this._resizeNew():this._wrapNew()},wrap:function(t){var i=a(t).data("width")||t.width(),e=a(t).data("height")||t.height(),s=100*this._calculateRatio(i,e)+"%",n=a("<div/>").addClass(this.options.wrapperCssClass).css("padding-bottom",s);return t.wrap(n).parent()},resize:function(t){return this._setupIframe(t),this._resizeIframe(t,this.element.width(),this.element.height(),this.options.fitHeight),t},destroy:function(){var i=this;i.options.mode===s?(this.element.find("iframe."+this.options.iframeCssClass).each(function(){var t=a(this).data(h);a(this).removeClass(i.options.iframeCssClass).width(t.width).height(t.height).data(h,null)}),this._unbind()):this.element.find("."+this.options.wrapperCssClass).children().unwrap(),this.element.data(o,null)},_init:function(){this.options.fitHeight&&(this.options.mode=s),this.options.mode===s&&this._bind(),this.update()},_wrapNew:function(){var t=this;this.element.find("iframe").filter(function(){return!a(this).closest("."+t.options.wrapperCssClass).length}).each(function(){t.wrap(a(this))})},_resizeNew:function(){var t=this;a("iframe").not(this.options.iframeCssClass).each(function(){t._setupIframe(a(this))}),this._resizeAll()},_setupIframe:function(t){var i=a(t).data("width")||t.width(),e=a(t).data("height")||t.height();t.data(h,{ratio:this._calculateRatio(i,e),width:i,height:e}).addClass(this.options.iframeCssClass)},_resizeAll:function(){var t=this,i=this.options.containerWidth.call(this),e=this.options.containerHeight.call(this),s=this.options.fitHeight;this.element.find("iframe."+this.options.iframeCssClass).each(function(){t._resizeIframe(a(this),i,e,s)})},_resizeIframe:function(t,i,e,s){var n=t.data(h).ratio;s&&e<i*n?t.height(e).width(e/n):t.height(i*n).width("100%")},_calculateRatio:function(t,i){return(i/t).toPrecision(4)},_bind:function(){var t,i=this;a(e).on("resize."+h,function(){clearTimeout(t),t=setTimeout(function(){i._resizeAll()},100)})},_unbind:function(){a(e).off("."+h)}},a.fn[h]=function(e){var s,n=arguments;return this.each(function(){var t=a.data(this,o);if(t){if("string"==typeof e&&"_"!==e[0]){var i=t[e];"function"==typeof i?s=i.apply(t,Array.prototype.slice.call(n,1)):a.error("Public method '"+e+"' does not exist on jQuery."+h)}}else a.data(this,o,new r(this,e,a.fn[h].defaults))}),void 0!==s?s:this},a.fn[h].defaults={wrapperCssClass:"fitframe-wrap",iframeCssClass:"fitframe",mode:"wrap",fitHeight:!1,containerHeight:function(){return this.element.height()},containerWidth:function(){return this.element.width()}}}(jQuery,window,document);